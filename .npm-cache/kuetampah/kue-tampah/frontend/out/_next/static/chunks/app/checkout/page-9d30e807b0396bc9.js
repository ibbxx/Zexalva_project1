(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{5185:function(e,a,r){Promise.resolve().then(r.bind(r,8060))},8060:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return w}});var n=r(2400),t=r(1134),s=r(7210),i=r(3130),d=r(5201),o=r(3065),l=r(9088),m=r(2388),c=r(2949),u=r(857);let p=e=>{let{total:a,customerName:r,orderId:n}=e,t=encodeURIComponent(JSON.stringify({orderId:n,customerName:r,total:a})),s=new URL("");return s.searchParams.has("size")||s.searchParams.set("size","340x340"),s.searchParams.set("data",t),s.toString()};var x=r(4379);let b=e=>{let a=["*Halo Toko Kue Tampah!*","","Saya ingin melakukan pemesanan dengan detail berikut:","Nama: ".concat(e.customerName),"Nomor: ".concat(e.phone),"Metode Pengiriman: ".concat("pickup"===e.deliveryMethod?"Ambil di Toko":"Antar ke Alamat")];"delivery"===e.deliveryMethod&&e.address&&a.push("Alamat: ".concat(e.address)),a.push("","*Pesanan:*"),e.items.forEach((e,r)=>{let n=e.quantity*e.product.price;a.push("".concat(r+1,". ").concat(e.product.name," x").concat(e.quantity," - ").concat((0,x.x)(e.product.price)," (Total ").concat((0,x.x)(n),")"))});let r=e.items.reduce((e,a)=>e+a.quantity*a.product.price,0);return a.push("","Total Pembayaran: *".concat((0,x.x)(r),"*")),e.notes&&a.push("","Catatan: ".concat(e.notes)),a.push("","Mohon konfirmasi ketersediaan dan detail pembayaran ya. Terima kasih!"),encodeURIComponent(a.join("\n"))};var h=r(1375),g=r(6522);let f=e=>{let{open:a,onOpenChange:r,total:t,customerName:s,qrImageUrl:i,orderId:d}=e;return(0,n.jsx)(h.fC,{open:a,onOpenChange:r,children:(0,n.jsxs)(h.h_,{children:[(0,n.jsx)(h.aV,{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm"}),(0,n.jsx)(h.VY,{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6",children:(0,n.jsxs)("div",{className:"w-full max-w-md rounded-[var(--radius-lg)] bg-white p-6 shadow-xl",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(h.Dx,{className:"text-lg font-semibold text-[var(--brand-black)]",children:"QRIS Pembayaran"}),(0,n.jsx)(h.x8,{className:"rounded-full bg-[var(--brand-surface)] p-1 text-[var(--brand-muted)] transition hover:text-[var(--brand-black)]",children:(0,n.jsx)(g.Z,{size:18})})]}),(0,n.jsxs)("p",{className:"mt-2 text-sm text-[var(--brand-muted)]",children:["Scan QR berikut dan selesaikan pembayaran untuk pesanan ",(0,n.jsx)("strong",{children:s}),"."]}),(0,n.jsxs)("div",{className:"mt-6 flex flex-col items-center gap-3",children:[(0,n.jsx)("div",{className:"rounded-[var(--radius-md)] border border-[var(--brand-pink-200)] bg-white p-4",children:(0,n.jsx)("img",{src:i,alt:"QRIS Pembayaran",className:"h-72 w-72 max-w-full rounded-[var(--radius-sm)] border border-[var(--brand-surface)] object-cover"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-sm text-[var(--brand-muted)]",children:"Total Pembayaran"}),(0,n.jsx)("p",{className:"text-2xl font-semibold text-[var(--brand-black)]",children:(0,x.x)(t)}),(0,n.jsxs)("p",{className:"mt-2 text-xs text-[var(--brand-muted)]",children:["ID Pesanan: ",d]})]})]}),(0,n.jsx)("p",{className:"mt-4 text-xs text-[var(--brand-muted)]",children:"Setelah pembayaran berhasil, mohon kirim bukti transfer ke WhatsApp agar tim kami dapat memproses pesanan kamu."})]})})]})})},v=l.Ry({name:l.Z_().min(2,"Nama minimal 2 karakter."),phone:l.Z_().min(8,"Nomor telepon tidak valid.").regex(/^[0-9+]+$/,"Nomor telepon hanya boleh berisi angka dan +."),address:l.Z_().optional(),deliveryMethod:l.Km(["pickup","delivery"]),paymentMethod:l.Km(["transfer","qris","cod"]),notes:l.Z_().optional()}).superRefine((e,a)=>{"delivery"===e.deliveryMethod&&(!e.address||e.address.trim().length<10)&&a.addIssue({path:["address"],code:m.NL.custom,message:"Alamat dibutuhkan untuk pengantaran."})}),k="kue-tampah-checkout-form",j={name:"",phone:"",address:"",deliveryMethod:"delivery",paymentMethod:"transfer",notes:""},y=()=>{let{items:e,subtotal:a,completeCheckout:r}=(0,u.jD)(),[t,s]=(0,i.useState)(!1),[l,m]=(0,i.useState)({open:!1,qrUrl:"",orderId:"",name:""}),{register:x,handleSubmit:h,reset:g,watch:y,formState:{errors:w}}=(0,d.cI)({resolver:(0,o.F)(v),defaultValues:j});(0,i.useEffect)(()=>{let e=window.localStorage.getItem(k);if(e)try{let a=JSON.parse(e);g({...j,...a})}catch(e){g(j)}},[g]);let N=y();(0,i.useEffect)(()=>{window.localStorage.setItem(k,JSON.stringify(N))},[N]);let S="6281234567890",P=async n=>{if(0===e.length){c.ZP.error("Keranjangmu masih kosong.");return}if(!S){c.ZP.error("Nomor WhatsApp belum dikonfigurasi.");return}s(!0);let t="KT-".concat(Date.now());try{let s=b({customerName:n.name,phone:n.phone,deliveryMethod:n.deliveryMethod,address:n.address,notes:n.notes,items:e}),i="https://wa.me/".concat(S,"?text=").concat(s);if(window.open(i,"_blank","noopener,noreferrer"),c.ZP.success("Checkout dibuka di WhatsApp."),"qris"===n.paymentMethod){let e=p({total:a,customerName:n.name,orderId:t});m({open:!0,qrUrl:e,orderId:t,name:n.name})}else r()}finally{s(!1)}},I=y("deliveryMethod"),M=y("paymentMethod");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("form",{onSubmit:h(P),className:"space-y-6 rounded-[var(--radius-lg)] bg-white/90 p-6 shadow-card backdrop-blur",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-[var(--brand-brown-700)]",children:"Data Pemesan"}),(0,n.jsx)("p",{className:"text-sm text-[var(--brand-muted)]",children:"Seluruh data tersimpan di perangkatmu agar proses checkout berikutnya lebih cepat."})]}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-[var(--brand-brown-700)]",children:"Nama Lengkap"}),(0,n.jsx)("input",{type:"text",...x("name"),className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-white px-3 py-2 text-base focus:border-[var(--brand-brown-500)] focus:outline-none focus:ring-4 focus:ring-[var(--brand-cream-200)]",placeholder:"Contoh: Anisa Putri"}),w.name&&(0,n.jsx)("span",{className:"text-xs text-[var(--brand-brown-500)]",children:w.name.message})]}),(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-[var(--brand-brown-700)]",children:"Nomor WhatsApp"}),(0,n.jsx)("input",{type:"tel",...x("phone"),className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-white px-3 py-2 text-base focus:border-[var(--brand-brown-500)] focus:outline-none focus:ring-4 focus:ring-[var(--brand-cream-200)]",placeholder:"Contoh: 628123456789"}),w.phone&&(0,n.jsx)("span",{className:"text-xs text-[var(--brand-brown-500)]",children:w.phone.message})]})]}),(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-[var(--brand-brown-700)]",children:"Metode Pengiriman"}),(0,n.jsxs)("select",{...x("deliveryMethod"),className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-white px-3 py-2 text-base focus:border-[var(--brand-brown-500)] focus:outline-none focus:ring-4 focus:ring-[var(--brand-cream-200)]",children:[(0,n.jsx)("option",{value:"delivery",children:"Antar ke alamat"}),(0,n.jsx)("option",{value:"pickup",children:"Ambil sendiri di dapur"})]})]}),(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-[var(--brand-brown-700)]",children:"Metode Pembayaran"}),(0,n.jsxs)("select",{...x("paymentMethod"),className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-white px-3 py-2 text-base focus:border-[var(--brand-brown-500)] focus:outline-none focus:ring-4 focus:ring-[var(--brand-cream-200)]",children:[(0,n.jsx)("option",{value:"transfer",children:"Transfer Bank"}),(0,n.jsx)("option",{value:"qris",children:"QRIS"}),(0,n.jsx)("option",{value:"cod",children:"Bayar di tempat (COD)"})]}),"qris"===M&&(0,n.jsx)("span",{className:"text-xs text-[var(--brand-muted)]",children:"QRIS akan muncul setelah kamu submit form."})]})]}),"delivery"===I&&(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-[var(--brand-brown-700)]",children:"Alamat Lengkap"}),(0,n.jsx)("textarea",{rows:3,...x("address"),className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-white px-3 py-2 text-base focus:border-[var(--brand-brown-500)] focus:outline-none focus:ring-4 focus:ring-[var(--brand-cream-200)]",placeholder:"Contoh: Jl. Sukajadi No. 15, Bandung"}),w.address&&(0,n.jsx)("span",{className:"text-xs text-[var(--brand-brown-500)]",children:w.address.message})]}),(0,n.jsxs)("label",{className:"flex flex-col gap-2 text-sm",children:[(0,n.jsx)("span",{className:"font-medium text-[var(--brand-brown-700)]",children:"Catatan Tambahan"}),(0,n.jsx)("textarea",{rows:3,...x("notes"),className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-white px-3 py-2 text-base focus:border-[var(--brand-brown-500)] focus:outline-none focus:ring-4 focus:ring-[var(--brand-cream-200)]",placeholder:"Permintaan khusus, jadwal pengiriman, dll (opsional)"})]}),(0,n.jsx)("button",{type:"submit",disabled:t||0===e.length,className:"w-full rounded-full bg-[var(--brand-brown-500)] px-6 py-3 text-sm font-semibold text-white shadow-card transition hover:bg-[var(--brand-brown-700)] disabled:cursor-not-allowed disabled:opacity-60",children:t?"Memprosesâ€¦":"Kirim Pesanan via WhatsApp"})]}),(0,n.jsx)(f,{open:l.open,onOpenChange:e=>{m(a=>({...a,open:e})),e||(r(),c.ZP.success("QRIS ditutup. Keranjang dikosongkan."))},total:a,customerName:l.name,qrImageUrl:l.qrUrl,orderId:l.orderId})]})};function w(){let{items:e,subtotal:a}=(0,u.jD)();return 0===e.length?(0,n.jsx)("main",{className:"mx-auto max-w-4xl px-6 py-20 text-center",children:(0,n.jsxs)("div",{className:"rounded-[var(--radius-lg)] bg-white/90 p-12 shadow-card",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-[var(--brand-brown-900)]",children:"Belum ada item untuk di-checkout"}),(0,n.jsx)("p",{className:"mt-3 text-sm text-[var(--brand-muted)]",children:"Pilih tampah terbaikmu terlebih dahulu. Keranjang akan tersimpan otomatis di perangkatmu."}),(0,n.jsx)(s.default,{href:"/",className:"mt-6 inline-flex rounded-full bg-[var(--brand-brown-500)] px-6 py-3 text-sm font-semibold text-white shadow-card transition hover:bg-[var(--brand-brown-700)]",children:"Telusuri Produk"})]})}):(0,n.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-16",children:[(0,n.jsxs)("div",{className:"mb-8 flex flex-col gap-2 border-b border-[var(--brand-brown-300)]/60 pb-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-[var(--brand-brown-900)]",children:"Checkout Pesanan"}),(0,n.jsx)("p",{className:"text-[var(--brand-muted)]",children:"Kami akan membuka WhatsApp untuk konfirmasi. Jika memilih QRIS, kode QR muncul setelah form dikirim."})]}),(0,n.jsxs)("div",{className:"grid gap-10 lg:grid-cols-[1.5fr,1fr]",children:[(0,n.jsx)(y,{}),(0,n.jsxs)("aside",{className:"space-y-6 rounded-[var(--radius-lg)] bg-white/90 p-6 shadow-card",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-[var(--brand-brown-900)]",children:"Ringkasan Pesanan"}),(0,n.jsx)("p",{className:"text-sm text-[var(--brand-muted)]",children:"Silakan cek lagi jumlah dan catatanmu."})]}),(0,n.jsx)("ul",{className:"space-y-4 text-sm",children:e.map(e=>(0,n.jsxs)("li",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"h-16 w-16 overflow-hidden rounded-[var(--radius-sm)] bg-[var(--brand-cream-100)]",children:(0,n.jsx)(t.default,{src:e.product.images.primary,alt:e.product.name,width:64,height:64,className:"h-full w-full object-cover"})}),(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium text-[var(--brand-brown-900)]",children:e.product.name}),(0,n.jsxs)("p",{className:"text-xs text-[var(--brand-muted)]",children:[e.quantity," x ",(0,x.x)(e.product.price)]})]}),(0,n.jsx)("p",{className:"font-semibold text-[var(--brand-brown-700)]",children:(0,x.x)(e.product.price*e.quantity)})]})]},e.product.id))}),(0,n.jsxs)("div",{className:"flex items-center justify-between rounded-[var(--radius-md)] bg-[var(--brand-cream-100)] px-4 py-3",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-[var(--brand-muted)]",children:"Total Dibayar"}),(0,n.jsx)("span",{className:"text-lg font-semibold text-[var(--brand-brown-900)]",children:(0,x.x)(a)})]}),(0,n.jsx)("div",{className:"rounded-[var(--radius-md)] border border-[var(--brand-brown-300)] bg-[var(--brand-cream-100)] px-4 py-3 text-xs text-[var(--brand-brown-700)]",children:"Setelah form dikirim, kamu akan diarahkan ke WhatsApp untuk konfirmasi final. Tim kami akan membalas maksimal dalam 15 menit pada jam operasional."})]})]})]})}},857:function(e,a,r){"use strict";r.d(a,{Pp:function(){return v},jD:function(){return f},xS:function(){return h}});var n=r(3443),t=r(1694),s=r(3169);let i=null,d={title:"Pesanan Kue Tampah masih menunggu \uD83C\uDF70",body:"Lanjutkan checkout sekarang sebelum slot pengiriman penuh. Ketuk untuk kembali ke keranjang."},o=()=>!0,l=async()=>{if(!o()||!("serviceWorker"in navigator))return null;try{let e=await navigator.serviceWorker.getRegistration();return null!=e?e:await navigator.serviceWorker.ready}catch(e){return null}},m=async()=>{if(!o()||!("Notification"in window)||"denied"===Notification.permission)return!1;let e=await l();if(e)try{return await e.showNotification(d.title,{body:d.body,icon:"/favicon.ico",tag:"kue-tampah-cart",data:{url:"/cart"}}),!0}catch(e){}try{return new Notification(d.title,{body:d.body,icon:"/favicon.ico"}),!0}catch(e){return!1}},c=async()=>{if(o()&&"Notification"in window&&"default"===Notification.permission)try{await Notification.requestPermission()}catch(e){}},u=()=>{i&&(window.clearTimeout(i),i=null)},p=e=>{o()&&window.localStorage.setItem("kue-tampah-cart-reminder-sent",e?"true":"false")},x=async e=>{let{lastUpdated:a,onTrigger:r,reminderAlreadySent:n}=e;if(!o()||n)return;u();let t=Math.max(0,9e5-(Date.now()-a)),s=async()=>{await m()&&(p(!0),null==r||r())};if(0===t){await s();return}i=window.setTimeout(()=>{s()},t)},b=e=>Math.max(1,Math.min(99,e)),h=(0,n.U)()((0,t.tJ)(e=>({items:[],lastUpdated:null,reminderSent:!1,addItem:a=>e(e=>({items:e.items.find(e=>e.id===a)?e.items.map(e=>e.id===a?{...e,quantity:b(e.quantity+1)}:e):[...e.items,{id:a,quantity:1}],lastUpdated:Date.now(),reminderSent:!1})),removeItem:a=>e(e=>({items:e.items.filter(e=>e.id!==a),lastUpdated:Date.now(),reminderSent:!1})),updateQuantity:(a,r)=>e(e=>({items:e.items.map(e=>e.id===a?{...e,quantity:b(r)}:e),lastUpdated:Date.now(),reminderSent:!1})),clearCart:()=>({items:[],lastUpdated:null,reminderSent:!1}),markReminderSent:()=>({reminderSent:!0})}),{name:"kue-tampah-cart",storage:(0,t.FL)(()=>localStorage)})),g=e=>e.map(e=>{let a=(0,s.g)(e.id);return a?{...e,product:a}:null}).filter(Boolean),f=()=>{let{items:e,lastUpdated:a,reminderSent:r,addItem:n,removeItem:t,updateQuantity:s,clearCart:i,markReminderSent:d}=h(),o=g(e),l=o.reduce((e,a)=>e+a.quantity*a.product.price,0),m=o.reduce((e,a)=>e+a.quantity,0);return{items:o,subtotal:l,itemCount:m,lastUpdated:a,reminderSent:r,addItem:n,removeItem:t,updateQuantity:s,clearCart:i,markReminderSent:d,completeCheckout:()=>{i(),p(!1)}}},v=()=>{let{items:e,lastUpdated:a,reminderSent:r}=h.getState();if(0===e.length){u(),p(!1);return}c(),x({lastUpdated:null!=a?a:Date.now(),reminderAlreadySent:r,onTrigger:()=>{h.getState().markReminderSent(),p(!0)}})};h.subscribe((e,a)=>{(e.items!==a.items||e.lastUpdated!==a.lastUpdated||e.reminderSent!==a.reminderSent)&&v()})},4379:function(e,a,r){"use strict";r.d(a,{x:function(){return n}});let n=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},3169:function(e,a,r){"use strict";r.d(a,{R:function(){return n},g:function(){return t}});let n=[{id:"tampah-premium",name:"Tampah Premium Nusantara",description:"Pilihan kue tradisional lengkap dengan tampilan cantik untuk acara spesial keluarga.",price:45e4,category:"Tampah",images:{primary:"/images/tampah-premium.jpg",secondary:"/images/jajan-pasar.jpg"},flavorNotes:"Gurih, manis legit, dan penuh tekstur tradisional."},{id:"jajan-pasar",name:"Jajan Pasar Komplit",description:"Aneka jajan pasar klasik seperti lapis legit, lemper, dadar gulung, dan nagasari.",price:225e3,category:"Jajanan Pasar",images:{primary:"/images/jajan-pasar.jpg",secondary:"/images/klepon.jpg"},flavorNotes:"Kombinasi rasa pandan, gula merah, dan kelapa parut."},{id:"snack-box",name:"Snack Box Korporat",description:"Kombinasi kue asin dan manis untuk rapat kantor atau seminar seharian.",price:35e3,category:"Snack Box",images:{primary:"/images/snack-box.jpg",secondary:"/images/tampah-premium.jpg"},flavorNotes:"Seimbang antara kue manis dan savory ringan."},{id:"tumpeng-mini",name:"Tumpeng Mini Celebration",description:"Nasi kuning mini lengkap lauk pendamping, cocok sebagai hantaran syukuran.",price:55e3,category:"Tumpeng",images:{primary:"/images/tumpeng-mini.jpg",secondary:"/images/snack-box.jpg"},flavorNotes:"Rempah nasi kuning dengan lauk pedas manis."},{id:"klepon",name:"Klepon Gula Aren",description:"Klepon kenyal isi gula aren cair, disajikan dengan kelapa parut yang gurih.",price:28e3,category:"Tradisional",images:{primary:"/images/klepon.jpg",secondary:"/images/jajan-pasar.jpg"},flavorNotes:"Kenyal legit dengan aroma pandan dan gula aren."},{id:"kue-kering",name:"Kue Kering Signature",description:"Toples kue kering premium seperti nastar, kastengel, dan putri salju.",price:18e4,category:"Kue Kering",images:{primary:"/images/kue-kering.jpg",secondary:"/images/snack-box.jpg"},flavorNotes:"Buttery, renyah, dan wangi keju premium."}],t=e=>n.find(a=>a.id===e)}},function(e){e.O(0,[64,134,568,371,381,744],function(){return e(e.s=5185)}),_N_E=e.O()}]);